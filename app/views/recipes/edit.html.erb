
<h2>recipe</h2>
<section>
  <%=semantic_form_for @recipe do |f| %>
    <h2><%= f.text_field :title, value: @recipe.title %></h2>
    <div id="recipe_base_info">
      <div class="section" id="recipe_body">
        <div id="recipe_photo" class="figure">
          <% if @recipe.image %>
            <%=image_tag url_for(action:"image", id: @recipe.id) %>
          <% else %>
            <%=image_tag "no_image.gif" %>
          <% end %>
        </div>
      <div id="description">
        <%= f.text_area :description, value: @recipe.description %>
      </div>
      <table>
        <% @recipe.edit_foodstuffs.each_with_index do |foodstuff,i| %>
          <tr>
            <td><%=text_field_tag "foodstuffs[#{i}][name]",   foodstuff.name %></td>
            <td><%=text_field_tag "foodstuffs[#{i}][amount]", foodstuff.amount %></td>
          </tr>
        <% end %>
      </table>
    </div>


    <dl id="recipe_steps">
      <% @recipe.edit_steps.each_with_index do |step,i| %>
        <dl class="step">
          <dt>Step <%= i + 1 %></dt>
          <dd><%= text_area_tag "steps[#{i}]", step.context, class:'step_edit_area' %></dd>
        </dl>
      <% end %>
    </dl>

    <h3>Point!!</h3>
    <div class="section"><%=f.text_area :one_point, value: @recipe.one_point %></div>

    <p><%= f.select :public, { public: true, closed: false } %></p>
    <p><%= f.submit "Next Step" %></p>
  <% end %>
</div>
