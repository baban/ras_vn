<% content_for :javascripts do %>
  <%= javascript_include_tag "d3.v2" %>
  <%= javascript_include_tag "statistics" %>
<% end %>
<% content_for :stylesheets do %>
  <%= stylesheet_link_tag :statistics %>
<% end %>

<h2>会員数:<%= @user_total %>人</h2>

<div class="widget">
  <h3>男女比</h3>
  <div id="sex_rate" class="graph"></div>
  <script>pie_chart( <%=raw @sex_rate_graph.to_json %>,"#sex_rate")</script>
  <table class="data">
    <% @sex_rate_graph.each do |k,v| %>
      <tr>
        <th><%= k %></th>
        <td><%= v %></td>
      </tr>
    <% end %>
  </table>
</div>

<div class="widget">
  <h3>地域別登録人数</h3>
  <div id="area_rate" class="graph"></div>
  <script>bar_chart( <%=raw @prefecture_table.to_json %>,"#area_rate")</script>
  <table class="data">
    <% @prefecture_table.each do |name,amount| %>
      <tr>
        <th><%= name %></th>
        <td><%= amount %></td>
      </tr>
    <% end %>
  </table>
</div>

<div class="widget">
  <h3>年代別登録人数</h3>
  <div id="age_rate" class="graph"></div>
  <script>bar_chart( <%=raw @dicade_table.to_json %>,"#age_rate")</script>
  <table class="data">
    <% @dicade_table.each do |name,amount| %>
      <tr>
        <th><%= name %></th>
        <td><%= amount %></td>
      </tr>
    <% end %>
  </table>
</div>

<div class="widget">
  <h3>ジャンル別レシピ数</h3>
  <div id="food_genre_rate" class="graph"></div>
  <script>bar_chart( <%=raw @food_genre_table.to_json %>,"#food_genre_rate")</script>
  <table class="data">
    <% @food_genre_table.each do |name,amount| %>
      <tr>
        <th><%= name %></th>
        <td><%= amount %></td>
      </tr>
    <% end %>
  </table>
</div>

<div class="widget">
  <h3>食材別ランキングベスト10</h3>
  <div id="foodstuff_rate" class="graph"></div>
  <script>bar_chart( <%=raw @foodstuff_table.to_json %>,"#foodstuff_rate")</script>
  <table class="data">
    <% @foodstuff_table.each do |name,amount| %>
      <tr>
        <th><%= name %></th>
        <td><%= amount %></td>
      </tr>
    <% end %>
  </table>
</div>

